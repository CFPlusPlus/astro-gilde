---
import Button from '../../ui/Button.astro';
import HomeSection from '../HomeSection.astro';

import { minecraftGilde } from '../../../config/minecraftGilde';
import { ArrowRight, Copy } from '@lucide/astro';

const DISCORD_URL = minecraftGilde.discord.url;
const MC_VERSION = minecraftGilde.mcVersion;

type Step = {
  no: 1 | 2 | 3;
  title: string;
  delay?: number;
};

const STEPS: Step[] = [
  { no: 1, title: 'IP kopieren & joinen', delay: 0 },
  { no: 2, title: 'Platz finden & claimen', delay: 80 },
  { no: 3, title: 'Homes setzen & dranbleiben', delay: 160 },
];
---

<HomeSection id="start" size="normal">
  <div class="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between" data-reveal>
    <div>
      <h2 class="text-3xl font-semibold tracking-tight">So startest du in 3 Schritten</h2>
      <p class="text-muted mt-3 max-w-2xl">
        Kurz, klar und ohne Overload – danach bist du direkt im Spiel.
      </p>
    </div>
  </div>

  <ol class="mt-10 grid gap-8 lg:grid-cols-3" role="list">
    {
      STEPS.map((step) => (
        <li
          class="relative"
          data-reveal
          data-reveal-delay={step.delay ? String(step.delay) : undefined}
        >
          <div class="flex items-start gap-4">
            <div class="bg-accent inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-xl font-semibold text-black">
              {step.no}
            </div>
            <div>
              <h3 class="text-base font-semibold">{step.title}</h3>

              {step.no === 1 ? (
                <p class="text-muted mt-2 text-sm">
                  Server hinzufügen, verbinden, loslegen – <strong>Java {MC_VERSION}</strong>.
                </p>
              ) : step.no === 2 ? (
                <p class="text-muted mt-2 text-sm">
                  Nutze <code>/rtp</code>, finde deinen Spot und sichere dein Gebiet mit Claims.
                </p>
              ) : (
                <p class="text-muted mt-2 text-sm">
                  Bis zu 20 Homes – und auf Discord bekommst du News, Hilfe und Events.
                </p>
              )}

              <div class="mt-4">
                {step.no === 1 ? (
                  <Button variant="primary" size="sm" class="gap-2" data-copy-ip>
                    <Copy size={16} /> IP kopieren
                  </Button>
                ) : step.no === 2 ? (
                  <Button href="/tutorial" size="sm" variant="secondary" class="gap-2">
                    Tutorial <ArrowRight size={16} />
                  </Button>
                ) : (
                  <Button href={DISCORD_URL} external size="sm" variant="secondary" class="gap-2">
                    Discord <ArrowRight size={16} />
                  </Button>
                )}
              </div>
            </div>
          </div>
        </li>
      ))
    }
  </ol>
</HomeSection>
