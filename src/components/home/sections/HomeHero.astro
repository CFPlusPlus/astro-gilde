---
import Button from '../../ui/Button.astro';
import Badge from '../../ui/Badge.astro';
import HomeSection from '../HomeSection.astro';

import { minecraftGilde } from '../../../config/minecraftGilde';
import { ArrowRight, Copy, Map, Users } from '@lucide/astro';

const DISCORD_URL = minecraftGilde.discord.url;
const DYNMAP_URL = minecraftGilde.mapUrl;
const SERVER_IP = minecraftGilde.serverIp;
const MC_VERSION = minecraftGilde.mcVersion;
---

<!-- Hero-Bereich -->
<!--
  WICHTIG (Mobile): Auf iOS/Chrome-Device-Emulation kann eine dynamische Messung/Anpassung
  (z. B. via ResizeObserver + CSS-Variablen) in Kombination mit sticky Elementen zu "Springen" führen.
  Deshalb ziehen wir NICHT das Layout nach oben, sondern verlängern ausschließlich den Hero-Hintergrund
  pauschal nach oben, sodass er auch hinter der Navbar bis ganz nach oben sichtbar ist.
  (Ohne JS, ohne Layout-Verschiebung, sticky bleibt stabil.)
-->

<section class="home-hero relative pt-28 pb-28 sm:pt-32 sm:pb-32 lg:pt-36 lg:pb-36">
  <div class="home-hero-bg pointer-events-none absolute inset-x-0 bottom-0 z-0">
    <img
      src="/images/header-background.webp"
      alt=""
      loading="eager"
      decoding="async"
      class="h-full w-full [mask-image:radial-gradient(80%_65%_at_50%_22%,black_0%,black_55%,transparent_100%)] object-cover object-top opacity-25"
    />
    <div class="from-bg/10 via-bg/70 to-bg absolute inset-0 bg-gradient-to-b"></div>
  </div>

  <div class="mg-container relative z-10">
    <div class="grid items-center gap-16 lg:grid-cols-[1.12fr_0.88fr] lg:gap-24">
      <div>
        <h1 class="text-4xl font-semibold tracking-tight sm:text-5xl" data-reveal>
          Minecraft Gilde
        </h1>
        <p
          class="text-muted mt-6 max-w-2xl text-base leading-relaxed sm:text-lg"
          data-reveal
          data-reveal-delay="80"
        >
          Langzeitwelt ohne Resets. Fair ohne Pay-to-Win. Vanilla+ Komfort – ohne das Gameplay
          zu verbiegen.
        </p>

        <div class="mt-12 flex flex-wrap items-center gap-3" data-reveal data-reveal-delay="140">
          <Button variant="primary" class="gap-2" data-copy-ip>
            <Copy size={18} /> IP kopieren
          </Button>
          <Button href={DISCORD_URL} external variant="secondary" class="gap-2">
            Discord <ArrowRight size={18} />
          </Button>
          <Button href="/tutorial" variant="ghost" class="gap-2">Tutorial</Button>
        </div>

        <p class="text-muted mt-8 text-sm" data-reveal data-reveal-delay="200">
          Keine Minigames, kein Citybuild – Fokus auf Survival & Freebuild.
        </p>

        <div class="mt-12 flex flex-wrap items-center gap-2" data-reveal data-reveal-delay="260">
          <Badge variant="accent">Vanilla+</Badge>
          <Badge>Langzeitwelt</Badge>
          <Badge>Kein P2W</Badge>
          <Badge>Java {MC_VERSION}</Badge>
        </div>
      </div>

      <div class="relative" data-reveal="right" data-reveal-delay="140">
        <img
          src="/images/logo-big.webp"
          width="900"
          height="900"
          alt="Minecraft Gilde Logo"
          loading="eager"
          decoding="async"
          class="mx-auto w-[min(420px,85%)] opacity-95 drop-shadow-[0_24px_60px_rgba(0,0,0,0.32)] select-none sm:w-[min(460px,90%)] lg:w-[min(520px,95%)]"
        />
      </div>
    </div>
  </div>
</section>

<!-- Join-Bar (aus dem Hero ausgelagert, damit der Hero luftiger & weniger überladen wirkt) -->
<HomeSection size="tight" containerClass="pt-0">
  <div class="bg-surface/30 rounded-[var(--radius)] px-4 py-6 sm:px-6 sm:py-7" data-reveal>
    <div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between">
      <div class="flex flex-wrap items-center gap-x-10 gap-y-4">
        <div>
          <div class="text-muted text-xs font-medium">Server-IP</div>
          <div class="mt-1 flex items-center gap-2">
            <code class="text-sm font-semibold">{SERVER_IP}</code>
            <button
              type="button"
              data-copy-ip
              class="border-border bg-surface hover:bg-surface-solid/70 inline-flex h-8 w-8 items-center justify-center rounded-lg border transition-colors"
              aria-label="Server-IP kopieren"
            >
              <Copy size={16} />
            </button>
          </div>
        </div>

        <div>
          <div class="text-muted text-xs font-medium">Version</div>
          <div class="mt-1 text-sm font-semibold">Java {MC_VERSION}</div>
        </div>

        <div>
          <div class="text-muted text-xs font-medium">Live</div>
          <div class="mt-1 flex flex-wrap items-center gap-x-6 gap-y-1 text-sm">
            <span class="inline-flex items-center gap-2">
              <Users size={16} />
              <span class="font-semibold" data-mc-online>Keine</span>
              <span class="text-muted">Minecraft</span>
            </span>
            <span class="inline-flex items-center gap-2">
              <Users size={16} />
              <span class="font-semibold" data-discord-online>Keine</span>
              <span class="text-muted">Discord</span>
            </span>
          </div>
        </div>
      </div>

      <div class="flex flex-wrap gap-2">
        <Button href={DYNMAP_URL} external variant="secondary" size="sm" class="gap-2">
          <Map size={16} /> Karte
        </Button>
        <Button href={DISCORD_URL} external variant="primary" size="sm" class="gap-2">
          Discord <ArrowRight size={16} />
        </Button>
      </div>
    </div>
  </div>
</HomeSection>
